---
title: "ThinkPad T14 Gen 1 (AMD)"
date: 2021-01-07
categories:
  - sysad
  - english
tags:
  - linux
slug: thinkpad-T14-Gen-1-AMD
---

Let me keep up note on configuring and administrating my ThinkPad T14 Gen 1
(AMD) under Debian GNU/Linux.  My system has 2 NVMe SSDs:

* AMD Ryzenâ„¢ 5 PRO 4650U -- 6 cores, 12 threads
* 32GB (PC4-25600 DDR4 SDRAM) -- after adding aftermarket 16GB SDRAM
* WDC PC SN520 SDAPMUW-128G-1001 (20370001) -- Moved to unused PCIe slot for WAN card slot.
* TS2TMTE220S (42B8T4EA) -- Aftermarket 2TB into original PCIe SSD slot.

## Distribution selection

In order to have decent graphics support easily, current testing distribution
(bullseye) is used.

```
$ uname -a
Linux goofy 5.9.0-5-amd64 #1 SMP Debian 5.9.15-1 (2020-12-17) x86_64 GNU/Linux
```

## Non-free firmwares

I think we need some non-free drivers.

* `firmware-amd-graphics`  --- GPU
* `firmware-iwlwifi`  --- WIFI ?
* `firmware-misc-nonfree`  --- ?
* `firmware-realtek`  --- NIC ?
* `amd64-microcode`  --- CPU

## EFI-based firmware updates

Install `gnome-firmware` package and update firmware on devices supported by
`fwupd` via GUI.

## Network configuration

Since there are 2 Ethernet devices (one on right side and one accessible from
docking station), I updated `/etc/network/interfaces` as follows to make them
hot-pluggable.

```
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback

# GNOME
### The network interface on normal port
allow-hotplug enp2s0
# This is an autoconfigured IPv4 interface
iface enp2s0 inet dhcp
# This is an autoconfigured IPv6 interface
iface enp2s0 inet6 auto

### The network interface on extra port
allow-hotplug enp2s0f0
# This is an autoconfigured IPv4 interface
iface enp2s0f0 inet dhcp
# This is an autoconfigured IPv6 interface
iface enp2s0f0 inet6 auto
```

## Audio configuration

For the regression of missing analog audio output incident experienced from
late-2020 (now 2021-Jan), my workaround is to run the following from console
after installing `pulseaudio-utils` once for every booting:

```
 $ pactl load-module module-detect
```

<!-- vim: set sw=2 sts=2 ai si et tw=79 ft=markdown: -->
