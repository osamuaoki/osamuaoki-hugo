---
title: "GTK GUI with PyGObject (4)"
date: 2021-07-18
categories:
  - coding
  - english
tags:
  - python
  - gtk
slug: pygi-4
---


## GUI workflow

Let's recap how GUI program are written here.

* Design static GUI components with Glade
    * Set the "composite" checkbox for the ID of the top GUI widget to make it
      "Class name"
* Using Python with GObject Introspection to access GTK and associated
  libraries to program dynamic GUI components
    * Use `Gtk.Template.Child()` to create variables matching IDs to access widgets.

## GtkNotebook and GtkStack

Let's go through more notable widgets again.

* [GtkNotebook](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Notebook.html) under the "Containers" button
* [GtkStack](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Stack.html) under the "Containers" button

These are very similar displaying a selected page out of stacked pages.  The
latter needs an extra "Control" button to change stacked page.

* [GtkStackSwitcher](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/StackSwitcher.html)
  under the "Control" button (horizontal/vertical list)
* [GtkStackSidebar](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/StackSidebar.html)
  under the "Control" button (vertical list)

For the content of the displayed button label for GtkStackSwicher, it is set as
property of the GtkStack widget.

## GtkListBox and GtkFlowBox

* [GtkListBox](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/ListBox.html) under the "Containers" button
* [GtkFlowBox](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/FlowBox.html) under the "Containers" button

These are like __Gtk.Box__ and __Gtk.Grid__ but its contents can by dynamically
sorted and filtered.

The children of these are __Gtk.ListBoxRow__ and __Gtk.FlowBoxChild__
respectively and these can be fairly complex. If the content of these are
simple enough, Use of __Gtk.TreeView__ and __Gtk.IconView__ may save your
efforts.

## GtkTreeView

Now that __Gtk.TreeView__ was mentioned in __Gtk.ListBox__ as a simpler tool to
use, let's use it with __Gtk.Template__.

__Gtk.TreeView__ is used with __Gtk.TreeModel__ such as __Gtk.ListStore__ or __Gtk.TreeStore__.

For this let's create a `phone-book.py`/`phone-book.ui` example.  It took me a
while to make this working since existing examples usually don't use Glade nor
  __Gtk.Template__.

You place
[GtkTreeView](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TreeView.html)
under the "Display" button to the desired window box.  Then click on pen-icon
in the "TreeView Model:" entry on the right side panel, and select "New" in the pop-up window.  This
will fill "TreeView Model:" entry box with "liststore1".

![The Glade screen](/img/phone-book-glade-tree.png)

Then you select newly created "liststore1" object on the left side panel.
You can set types of data for each column and initial data to be filled-in.
Since column header is represented as comment in XML, these seems to be just
placeholders.

![The Glade screen](/img/phone-book-glade-list.png)

The rest of operations are pretty much routines.

### How to create GUI program

Now we are ready to use this Glade origin header bar widget from `simple3.py`
by `header = Gtk.Template.Child()`:

{{< snippet "examples/glade/phone-book.py" >}}

Running this with `python3 phone-book.py` will start the GUI as:

![Run simple3](/img/phone-book-py.png)

Please play with this GUI to see label get updated as you select listed item..

## How Glade generated XML looks

Just in case I forget which items were selected via Glade session, here is the
Glade generated XML `simple3.ui`:

{{< snippet "examples/glade/phone-book.ui" >}}

<!-- vim: set sw=2 sts=2 ai si et tw=79 ft=markdown: -->
