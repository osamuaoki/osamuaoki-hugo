---
title:  Rescue media(2)
date: 2025-08-22T00:00:00+00:00
categories:
  - Debian
  - english
tags:
  - rescue
slug: rescue-02
---

This is updated memo of [Rescue media(1)]({{< ref "../jp/note-00025.md" >}})  (in Japanese).

## Rescue media

There are many iso images which are useful for system administration and rescue
tasks available on the web.  Here are some of the notable ones:

* [GParted live](https://gparted.org/livecd.php)
  * GOOD: active
  * GOOD: Debian based system rescue media.
  * GOOD: GUI partition manager
  * BAD: Currently, Debian Lacks GUI LVM manager like [blivet-gui](https://github.com/storaged-project/blivet-gui)
    * TODO: Follow [Create GParted live from scratch](https://gparted.org/create-gparted-live.php) to install [blivet-gui deb pakage](https://software.opensuse.org/download.html?project=home:vtrefny&package=blivet-gui)
* [debian-installer (netinst)](https://www.debian.org/distrib/netinst)
  * GOOD: active and stable
  * GOOD: This facilitates official Debian system install.
  * BAD: "rescue mode" needs to mount a functioning root filesystem and it can't
  be unmounted for filesystem operation (fsck...).
* [Debian live](https://www.debian.org/CD/live/index.en.html)
  * GOOD: active
* [Debian live](https://www.debian.org/CD/live/index.en.html)
  * GOOD: active
  * GOOD: Debian based system rescue media.
* [Kali Linux Live image ](https://www.kali.org/get-kali/#kali-live)
  * GOOD: active
  * GOOD: Debian based system rescue media.
* [SYSTEM RESCUE HOMEPAGE](https://www.system-rescue.org/)
  * GOOD: active
  * FAIR: ARCHlinux based system rescue media
* [Super Grub2 Disk](https://www.supergrubdisk.org/super-grub2-disk/)/[Rescatux](https://www.supergrubdisk.org/rescatux/)
  * GOOD: last release 2024 for [Super Grub2 Disk](https://www.supergrubdisk.org/super-grub2-disk/) (the multi disk/iso boot loader, now support btrfs)
  * BAD: last released in 2021 for [Rescatux](https://www.supergrubdisk.org/rescatux/) (outdated linux iso image)
* [Ventoy](https://www.ventoy.net/en/index.html)
  * GOOD: active (the multi disk/iso boot loader w/o iso image)

## Ventoy + Gparted

Since modern USB-keys have huge storage space, I decided to use
[ventoy](https://www.ventoy.net/en/index.html) and put all interesting iso
images in it. This way, I only need to maintain one USB key.

For the moment, I will mostly use Gparted live iso image.

## Booting system

* Sony Vaio: power up system with a USB key inserted with "ASSIST" button.
* Thinkpad T14 Gen 1 (AMD): power up and press ENTER or F12

<!--

## Migrating from ext4 to Btrfs for home

* Boot from USB to use rescue boot shell
  * Copy all data on separate home to root disk under `/home`.
  * Remove mounting of home in `/etc/fstab` on target SSD.
* Boot normal SSD system
  * Format old separate home LV to btrfs
  * Create subvolume `@home` andmount it at `/mnt`
  * Copy back data under `/home` to `/mnt`.
  * Change mounting of home in `/etc/mtab` and `/etc/fstab` to use `@home` for home.
  * Reboot


## Convert ext4 to Btrfs

Suppose the target LV is `sdX5_crypt`:

```
 # umount /dev/mapper/casper--vg-home
 # fsck.ext4 -f /dev/mapper/casper--vg-home
 # btrfs-convert /dev/mapper/casper--vg-home
```


## Resize operation order

Simple LVM with no VG (Disk partition == PV).



* (Shrink FS -> Shrink LV) -> Shrink PV -> Shrink disk partition
* Expand disk partition -> Expand PV -> (Expand LV -> Expand FS)

* resize LVM logical volume (LV) with resize FS
  *  `lvresize -r`
    * This invokes:
      * `resize2fs`
      * `fatresize`
      * `btrfs filesystem resize`





Ubuntu で LVM を使う
https://www.kkaneko.jp/tools/server/lvm_ubuntu.html
CLI

storaged-project/blivet-gui
https://github.com/storaged-project/blivet-gui

Debian live CD

Encrypted Btrfs storage setup and maintenance guide
https://gist.github.com/MaxXor/ba1665f47d56c24018a943bb114640d7

-->

<!--
vim: set sw=2 sts=2 ai si et tw=79 ft=markdown:
-->
