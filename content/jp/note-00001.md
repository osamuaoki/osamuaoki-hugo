---
title: anthyのユーザー辞書
date: 2019-02-09
categories:
  - nlp
  - japanese
tags:
  - anthy
slug: anthy-dict
---

[Anthyのソース](https://salsa.debian.org/debian/anthy)を見るとメイン
辞書以外のユーザー辞書は、単漢字入力などの入力文字列として半角tを最後
につけた辞書が、ファイル名「*.t」で多数含まれ配布されています。

（もっとも、現在のDebianのソースは NIIBE Yutakaさんが最近再構成したので、
ファイルの起源はどうもalt-cannadicは由来かもしれません）

これらは個人用辞書用と言うことですが、現在（２０１９年２月）の時点では
「郵便番号→住所」変換をするためのzipcode.t以外はバイナリーパッケージに
コピーされていないので直接システムに導入するようにはなっていません。

ただ同梱された「郵便番号→住所」変換をするための辞書は「７桁半角数字＋半角t」
を入力すると郵便番号に対応する住所の文字列を吐き出すようになっているように
見受けます。

実際にanthyをibus-anthyの下で動作させると「７桁半角数字＋半角t」や、
他の「t」で終わる文字列を入れても何も起こりません。ibus-anthyの下では
このzipcode.tは明らかに使われていません。

良く見るとibus-anthyが

```
/usr/share/ibus-anthy/dicts/emoji.t
/usr/share/ibus-anthy/dicts/era.t
/usr/share/ibus-anthy/dicts/oldchar.t
/usr/share/ibus-anthy/dicts/symbol.t
/usr/share/ibus-anthy/dicts/zipcode.t
```

をインストールして、GUIの設定が「`~/.anthy/*.t`」からシムリンクをはるなど
してこれらをユーザー辞書として使えるようにしているようです。

ただこれらのユーザー辞書では、入力文字列として半角tを最後つけることはされて
いません。「郵便番号→住所」変換をするための辞書は「３桁全角数字、
全角の長音(UTF-8=E383BC, Unicode=U+30FC)、４桁全角数字」を入力すると、
郵便番号に対応する住所の文字列を対応させるようになっていますし、実際の
動作もそうです。

どうもこの違いは、使うフロントエンドによって提供されるローマ字入力から
かなに変換される際のルールが異なることが背景にあるようです。
（「uim」は使っていないのであくまで推測です）

  * 「ibus-anthy」 数字・記号入力は全角数字・記号、単ローマ字入力は大文字半角
  * 「uim」        数字・記号入力は半角数字・記号、単ローマ字入力は小文字半角

ローマ字入力からのかな漢字変換は、どうも使うフロントエンドによって少々動作が
違うので要注意です。

そもそもこの変な変換辞書スタイルは、昔の「`canna`辞書」由来かもしれません。

<!-- vim: se ai tw=79: -->
