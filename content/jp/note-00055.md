---
title: QMK (7) -- 再キーマップ改善
date: 2022-09-09
categories:
  - iot
  - japanese
tags:
  - qmk
slug: home-mt2
---

## キーマップ改善の状況

キーマップ改善の基本方針としてのタップとホールドの有効利用は、[QMK (4) – キーマップ改善]({{<ref "note-00047.md">}})から変わっていません。

以前から遊んでいたAVR系でQMKを使う[cgc56](https://github.com/osamuaoki/cg56)という一体型キーボードと、
今回ARM系でQMKを使う[STM32F411CE (4)]({{<ref "note-00054.md">}})で作ったcgs58という分割キーボードと、
できれば将来interceptionを使いLaptop PCの内蔵キーボードの全てで、キーマッピングの基本部分を共用できるようにすることにも配慮しました。

特にcgc56を使ってきた経験を生かし、細かな調整を加えました。設計指針の要点をもう一度まとめると以下です。

* 標準キーボードとキーの位置をできるだけ変えないことで、使用時のメンタルストレス無くする。(QWERTYの中心利用。ブロック毎に動かす感じ。)
* フィジカルストレスが少なくなるように、指の動きを少なくする。「基本的に使う部分」を(3rows x 6columns + 2thums ) x 2sides とし、1U以上の動き無くす。
* HOME-ROW MODを採用する。
* 日本語と英語・コーディングの両方の用途に配慮する。(ANSIなのに「無変換」「変換」キーをつける変則構成。)

### キーマップ pico

「基本的に使う部分」を、左`6x3_2`キーと右`6x3_2`キーに限定し、それらのキーの使用は以下のようなpico系配列に落ち着いて来ました。

```
 │Tab│ Q │ W │ E │ R │ T │***│***│ Y │ U │ I │ O │ P │Bsp│
 │Esc│lsA│lcS│laD│lgF│raG│***│***│raH│lgJ│laK│lcL│ls;│Ent│
 │Mut│ Z │ X │lgC│ V2│ B │***│***│ N │ M │ , │ . │ / │Psc│
 │***│***│***│***│Muh│Sp1│***│***│Sp1│Hen│***│***│***│***│
```

これだと、全ての指のポジション移動量を1U以下に押さえられます。

キー配列はANSIベースです。

ちょっと変則的ですが、日本語キーボードの変換・無変換キーをSPACEの横におきます。これでソフトは動きます。

所持するキーボードがキーが多めなので上記配列で使わないキーはFnキーに等に適当に割り降ります。(あまり使わない気もしますが)

HOME-ROW-MODで出番の減った両端のシフトキーを、タップで使わないのももったいないので、メディアキーなどに割り振ります。ただHOLDはシフトのままにしておきます。viの「ZZ」等はこの方が良いので。

### キーキャップ配置

* [cgc56のソースコード](https://github.com/osamuaoki/qmk_firmware/tree/osamu1/keyboards/cgc56) keymap=`pico`
* cgc56 with DSA profile keycaps (pico):
![cgc56 with DSA profile keycaps (pico)](/img/cgc56-20220911.jpg)

* [cgs58のソースコード](https://github.com/osamuaoki/qmk_firmware/tree/osamu1/keyboards/cgs58) keymap=`pico`
* cgs58 with OEM profile keycaps (pico):
![cgs58 with OEM profile keycaps (pico)](/img/cgs58-20220911.jpg)

<!-- vim: se ai tw=150: -->
