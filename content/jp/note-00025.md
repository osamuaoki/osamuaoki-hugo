---
title: Rescue media(1)
date: 2020-05-30
categories:
  - sysad
  - japanese
tags:
  - rescue
slug: rescue-01
---

UEFIとかMBRとかいろいろある昨今のRescue mediaを探しました。

Grubのレスキューイメージもありますが、これを直接操るのは結構大変
と思っていたら、
[Super Grub2](https://www.supergrubdisk.org/super-grub2-disk/)
と言う便利なものがあることに気づきました。

Super Grub2はUEFIとかMBRの設定が壊れたシステムを自動調査してくれ
起動してくれるのみならず、DebianやUbuntuのLIVE ISOイメージを
DOSのFATファイルシステムのメディアに複数書き込むだけで、これらを
選択起動できるようにしてくれる優れものです。

よく分かっていませんが、ディスクの入れ替えやインストーをして、その後
戻した後にUEFIの場合ブートしなくなったことがおこりました。そんな際に
Super Grub2だと素直に起動しました、ただ起動後、単に`update-grub`とし
ただけでは、起動設定更新がうまく行かなかったことがありました。こんな
時にはまず以下としました。

```
$ sudo dpkg-reconfigure grub-efi-amd64
```

NVRAM variablesの更新他いろいろするようです。さらにBIOSのブートの優先
順位をさわることも有効でした。

実際にSuper Grub2に用意した8GBのUSBキーでは、レスキュー用のLinuxの
Live imageとして以下のISOイメージを入れました。

* [Rescatux](https://www.supergrubdisk.org/rescatux/)
* [boot-repair](https://sourceforge.net/projects/boot-repair/)
* [Debian live install image](https://www.debian.org/CD/live/)

こららがあると思うだけで、UEFIとMBRの両方のシステム対応なので
安心感があります。

ここで使うISOイメージですが、Debianの標準のインストール用の
ISOイメージは、上記が用いるGrub2のループマウントでは
使えないようです。

Debianの標準のインストール用のISOイメージは、全イメージを
生のUSBキーに直接`cp`か`dd`で書いたものを準備する必要があります。
１つ古い小さなUSBキーに書いて手元に置いています。

このDebianの標準のインストール用のISOイメージはですが、
わたしは視力があり音声サポートがいらないので、D-Iが作っている
[mini.iso](https://d-i.debian.org/daily-images/amd64/daily/netboot/)
を使っています。46MBと極端に小さいので便利です。

実際のインストールの際には、キーファイル(GNUPG/SSHデーターや
VIMやローカルのshell script他)の入った小型バックアップの
USBキーを準備すると効率的です。

<!-- vim: sw=2 sts=2 et se ai tw=79: -->
